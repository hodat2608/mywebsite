<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comment Popup</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  background-color: #f4f4f4;
}

button {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  background-color: #4267b2;
  color: #fff;
  cursor: pointer;
  border-radius: 5px;
}

.popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  background-color: rgba(0, 0, 0, 0.5);
  overflow-y: auto;
}

.popup-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #fff;
  padding: 20px;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  overflow-y: auto;
}

input {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  border: 1px solid #ddd;
  border-radius: 5px;
  margin-bottom: 10px;
}

button {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  background-color: #4267b2;
  color: #fff;
  cursor: pointer;
  border-radius: 5px;
}

@import url("https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap");
:root {
  --color-main: #71c6dd;
  --color-main-light: #e1f6fb;
  --color-dark: #3f4156;
  --color-dark-medium: #51546e;
  --color-dark-light: #696d97;
  --color-light: #e5e5e5;
  --color-gray: #8b8b8b;
  --color-light-gray: #b2bdbd;
  --color-bg: #2d2d39;
  --color-success: #5dd693;
  --color-error: #fc4b0b;
}
* {
  font-family: "DM Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
    "Helvetica Neue", sans-serif;
  margin: 1;
  padding: 1;
  box-sizing: border-box;
  text-rendering: optimizeLegibility;

  font-size: inherit; 
}

body {
    background-color: rgb(255, 255, 255);
}

.home-container {
    display: grid;
    grid-template-columns: 2fr 3fr 2fr ;
    }

.side-section {
  text-align: center;
}

.main-section {

  text-align: center;
}
    
/* home card      */
.card {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    max-width: 700px;
    margin: 20px auto; /* Để căn giữa theo chiều ngang */
    padding: 16px;
    background-color: #ebebeb;
    border-radius: 5px;
    position: relative;
    top: 10%;
    /* transform: translateY(10%); */
}
.card h5 {
      font-size: 15px;
      color: #333;
      font-weight: normal;
    }   
.card p {
      font-size: 16px;
      color: #666;
    }

  
/* button comment and like   */
.btn-group button {
    background-color: #ffffff;
    border: none;
    color: black; 
    padding: 8px 12.4%;
    cursor: pointer; 
    float: left; 
  } 

.btn-group:after {
    content: "";
    clear: both;
    display: table;
  }  
.btn-group button:not(:last-child) {
    border-right: none; 
  }
.btn-group button:hover {
    background-color: #d1cbcb;
  }

.info-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
} 

/* create box */
* {
  box-sizing: border-box;
}

input[type="file"] {
  display: none;
}
ul {
  list-style-type: none;
}

.btn {
  padding: .5em 1em;

  background-color: transparent;
  color: #6b7270;

  border: none;
  cursor: pointer;
}

.widget-post {
  width: auto;
  min-height: 100px;
  height: 320px;

  border: 1px solid #eaeaea;
  border-radius: 6px;
  box-shadow: 0 1px 2px 1px rgba(130, 130, 130, 0.1);

  background-color: #fff;

  margin: auto;
  overflow: hidden;
}

.widget-post__header {
  padding: .2em .5em;

  background-color: #eaeaea;
  color: #3f5563;
}
.widget-post__title {
  font-size: 18px;
}

.widget-post__content {
  width: 100%;
  height: 50%;
}
.widget-post__textarea {
  width: 100%;
  height: 100%;
  padding: 10px 10px 125px 10px;
  border: none;
  resize: none;
}
.widget-post__textarea:focus {
  outline: none;
}

.widget-post__options {
  padding: .5em;
}
.widget-post___input {
  display: inline-block;

  width: 24%;
  padding: .2em .5em;

  border: 1px solid #eaeaea;
  border-radius: 1.5em;
}
.post-actions__label {
  cursor: pointer;
}

.widget-post__actions {
  width: 100%;
  padding: 1em;
}
.post--actions {
  position: relative;
  padding: 0.2em;
  top: 25px;

  background-color: #f5f5f5;
  color: #a2a6a7;
}
.post-actions__attachments {
  display: inline-block;
  width: 60%;
}
.attachments--btn {
  background-color: #eaeaea;
  color: #007582;

  border-radius: 1.5em;
}

.post-actions__widget {
  display: inline-block;
  width: 38%;
  text-align: right;
}
.post-actions__publish {
  width: 120px;

  background-color: #008391;
  color: #fff;

  border-radius: 1.5em;
}

.scroller::-webkit-scrollbar {
  display: none;
}

.is--hidden {
  display: none;
}

.sr-only {
  width: 1px;
  height: 1px;

  clip: rect(1px, 1px, 1px, 1px);
  -webkit-clip-path: inset(50%);
  clip-path: inset(50%);

  overflow: hidden;
  white-space: nowrap;

  position: absolute;
  top: 0;

}

/* *  Placeholder contrast * */
::-webkit-input-placeholder {
  color: #666;
}
::-moz-placeholder {
  color: #666;
}
:-ms-input-placeholder {
  color: #666;
}
:-moz-placeholder {
  color: #666;
}
 

.create-button {
  background-color: #bbbbbb;
  color: #000000;
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
}

/* comment card */
.comment-cad {
  border: 1px solid #ccc;
  border-radius: 5px;
  padding: 10px;
  margin: 0
}
.comment-cad-repply {
  border: 1px solid #ccc;
  border-radius: 5px;
  padding: 5px;
  margin-left: 30px;
}
.comment-cad h5 {
  margin-bottom: 10px;
  text-align: left;
  margin-top: 5px;

}

.comment-cad small {
  color: #555;
}

.comment-cad img {
  width: 100px;
}


.form1 input[type=text] {
  width: 80%;
  box-sizing: border-box;
  border: 2px solid #ccc;
  border-radius: 4px;
  font-size: 12px;
  background-color: white;
  background-image: url('searchicon.png');
  background-position: 10px 10px; 
  background-repeat: no-repeat;
  padding: 11px 20px 11px 40px;
  -webkit-transition: width 0.4s ease-in-out;
  transition: width 0.4s ease-in-out;
  }
  
  .form1 input[type=text]:focus {
  width: 80%;
  }

.form2 input[type=text] {
  width: 100%;
  box-sizing: border-box;
  border: 2px solid #ccc;
  border-radius: 4px;
  font-size: 12px;
  background-color: white;
  background-image: url('searchicon.png');
  background-position: 10px 10px; 
  background-repeat: no-repeat;
  padding: 40px 40px 40px 40px;
  -webkit-transition: width 0.4s ease-in-out;
  transition: width 0.4s ease-in-out;
  }
  
  .btnn {
  background-color: transparent;
  border: none;
  display: inline-flex;
  align-items: center;
  gap: 1rem;
  cursor: pointer;
  transition: all ease-in-out 0.3s;
  padding: 0.5rem 1.8rem;
  border-radius: 5px;
  box-shadow: 1px 1px 3px 1px rgba(0, 0, 0, 0.15);
  font-weight: 500;
  }

.widget-post1 {
  width: auto;
  min-height: 100px;
  height: 150px;

  border: 1px solid #eaeaea;
  border-radius: 6px;
  box-shadow: 0 1px 2px 1px rgba(130, 130, 130, 0.1);

  background-color: #fff;

  margin: auto;
  overflow: hidden;
}

.post--actions1 {
  position: relative;
  padding: 1em;
  top: 0.1em;
  background-color: #f7f7f7;
  color: #000000;
}
.widget-post__actions1 {
  width: 100%;
  padding: 0.2em;
}


.widget-post__textarea1 {
  width: 100%;
  height: 100%;
  padding: 10px 10px 48px 10px;
  border: none;
  resize: none;
}

.widget-post2 {
  width: 640px;
  min-height: 100px;
  height: 190px;

  border: 1px solid #eaeaea;
  border-radius: 6px;
  box-shadow: 0 1px 2px 1px rgba(130, 130, 130, 0.1);

  background-color: #fff;

  margin: auto;
  overflow: hidden;
}

.post--actions2 {
  position: relative;
  padding: 1em;
  top: 0.1em;
  background-color: #f7f7f7;
  color: #000000;
}
.widget-post__actions2 {
  width: 100%;
  padding: 0.2em;
}


.widget-post__textarea2 {
  width: 100%;
  height: 100%;
  padding: 10px 10px 25px 10px;
  border: none;
  resize: none;
}


.mode-font-rep{ 
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 2px 8px 2px 8px;
    margin-left: 30px  ;
    font-size: 12px;
}
.mode-font-like{ 
  border: 1px solid #ccc;
  border-radius: 5px;
  padding: 2px 13px 2px 13px;
  margin-left: 0 ;
  font-size: 12px;
}

.rep-form-input{ 
  padding: 2px 13px 2px 13px;
  margin-left: 50px;
  font-size: 12px;
}


/* repply form */

.message-form {
  display: flex;
  align-items: center;
}

.form-row {
  display: flex;
  align-items: center;
  border: 1px solid #ccc;
  border-radius: 20px;
  padding: 3px;
  flex-grow: 1;
  width: 150%;
  margin-left: 50px;
}

input[type="text"] {
  flex-grow: 1;
  border: none;
  padding: 2px;
  outline: none;
  background-color: #f1f1f1;
}

.upload-icon {
  display: flex;
  align-items: center;
  margin: 0 5px;
}

.upload-icon input[type="file"] {
  display: none;
}

.upload-icon i {
  margin-right: 5px;
  color: #999;
}

.send-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
  outline: none;
}

.send-button i {
  color: #999;
}




/* card-profile */

.home-container-profile {
  display: grid;
  grid-template-columns: 1fr 3fr 3fr 1fr;
}
.formatted-text {
    white-space: pre-wrap;
}
a{
  text-decoration: none;
  color: #000000;
  font-weight: bold;
}

.card-profile {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    width: 300px;
    height: 400px;
    margin: 20px;
    padding: 16px;
    background-color: #e9e9e9;
    border-radius: 5px;
    text-align: center;
    }   
.card-profile h3 {
      font-size: 20px;
      color: #333;
      text-align: center;
    }   
.card-profile p {
      font-size: 16px;
      color: #666;
      text-align: center;
    }
.card-profile img {
  width: 100px;
  border: #666;
  border-image: round;
  text-align: center;
  border-radius : 50px;
}
.card-profile br {
  margin: 10px 0; 
}
.card-profile button {
  background-color: #bbbbbb;
  color: #000000;
  border: none;
  padding: 10px 20px 10px 20px;
  border-radius: 5px;
  cursor: pointer;
}

.card-profile1 {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    width: 300px;
    height: 400px;
    margin: 20px;
    padding: 16px;
    background-color: #e9e9e9;
    border-radius: 5px;
    text-align: center;
    }   
.card-profile1 h3 {
      font-size: 20px;
      color: #333;
      text-align: center;
    }   
.card-profile1 p {
      font-size: 16px;
      color: #666;
      text-align: center;
    }
.card-profile1 img {
  width: 100px;
  border: #666;
  border-image: round;
  text-align: center;
  border-radius : 50px;
}
.card-profil1e br {
  margin: 10px 0; 
}
.card-profile1 button {
  background-color: #e9e9e9;
  color: #000000;
  border: none;
  padding: 10px 20px 10px 20px;
  border-radius: 5px;
  cursor: pointer;
}
.card-profile2 {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    width: 300px;
    height: 300px;
    margin: 20px;
    padding: 16px;
    background-color: #e9e9e9;
    border-radius: 5px;
    text-align: center;
    }   
.card-profile2 h3 {
      font-size: 20px;
      color: #333;
      text-align: center;
    }   
.card-profile2 p {
      font-size: 16px;
      color: #666;
      text-align: center;
    }
.card-profile2 img {
  width: 100px;
  border: #666;
  border-image: round;
  text-align: center;
  border-radius : 50px;
}
.card-profile2 br {
  margin: 10px 0; 
}
.card-profile2 button {
  background-color: #e9e9e9;
  color: #000000;
  border: none;
  padding: 10px 20px 10px 20px;
  border-radius: 5px;
  cursor: pointer;
}
.hell{ 
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1px;
}

</style>

  </style>
</head>
<body>
  <button id="comment-button" onclick="toggleCommentPopupWithDelay()">Comment</button>

  <div class="popup" id="comment-popup">
    <div class="card">

      <div>   
          <!-- post views -->
          <span>@{{ post_comment_section_id.post_user }}</span>
          <h5>{{ post_comment_section_id.discription }}</h5>
          <h5><img src =" {{ post_comment_section_id.post_image.url}}" width="600" ></h5>
      </div> 

      <div class="info-container">
          <p style="margin-right: 10px;">{{ post_comment_section_id.post_likes.count }} like{{ post_comment_section_id.post_likes.count|pluralize  }}</p>
          <p>{{ post_comment_section_id.commentviews_set.count }} comment{{ post_comment_section_id.commentviews_set.count|pluralize }}</p>
      </div>

      <div class="btn-group"> 
          <!-- like and Hate -->
          <form action="{% url 'post_like_post_comment_section' post_comment_section_id.id %}" method="post">
              {% csrf_token %}
              {% if request.user in post_comment_section_id.post_likes.all %}
                <button type="submit">Hate</button>
              {% else %}
                <button type="submit">Like</button>
              {% endif %}
          </form>

          <form action="{% url 'post_comment_section' post_comment_section_id.id %}" method="post">
              {% csrf_token %}  
              <button type="submit">Comment</button>
          </form>

          <form action="#" method="post">
              {% csrf_token %}  
              <button type="submit">Share</button>
          </form>
          
      </div>

      <hr>

      <div class="widget-post1" aria-labelledby="post-header-title">
          <form action="{% url 'send_comment' 0 %}" method="post" id="send-comment" data-send-id="{{ post_comment_section_id.id }}" enctype="multipart/form-data" class="widget-post1__form" aria-label="post widget">
              {% csrf_token %}
              <div class="widget-post__content">
                  <label for="post-content" class="sr-only">Share</label>
                  <textarea id="message" class="widget-post__textarea1 scroller" placeholder="..."></textarea>
              </div>
              <div class="widget-post__actions1 post--actions1">
                  <div class="post-actions__attachments">
                      <button type="button" class="btn post-actions__upload attachments--btn">
                          {% csrf_token %}
                          <label for="massage_image" class="post-actions__label">
                          <i class="fa fa-upload" aria-hidden="true"></i> 
                          image
                          </label>
                      </button>
                      <input type="file" id="massage_image" multiple>
                  </div>
                  <div class="post-actions__widget">
                      {% csrf_token %}
                      <button type="submit" class="btn post-actions__publish">Comment</button>
                  </div>                  
              </div>
          </form>
      </div>

      <hr> 

      <div>
          <!-- comment section -->
          {% for comment in post_comment_section_id.commentviews_set.all %}
              <div>
                  <div>
                      <div class="comment-cad">
                          <a href=" {% url 'post_profile' comment.comment_user_id %}">@{{ comment.comment_user }}</a>
                          <h5>{{ comment.message }}</h5>
                          {% if comment.massage_image %}
                              <h1><img src="{{ comment.massage_image.url }}" width="100"></h1>
                          {% endif %}                      
                      </div>  
                      <div>
                          <button class="mode-font-rep" onclick="toggleCreatePostForm(event,'repply-form-{{ comment.id }}')">Phản hồi</button>
                          <button class="mode-font-like">Like</button> 
                      </div>
              
                      <!-- repply-form-input -->
                      <div class="message-form">
                          <form action="{% url 'repply_comment' comment.id %}" method="post" id="repply-form-{{ comment.id }}" enctype="multipart/form-data" style ="display: none;">   
                              {% csrf_token %}
                              <div class="form-row">
                                  <input type="text" name="rep_message" placeholder="Type your message">
                                  <label for="rep_mess_image" class="upload-icon">
                                      <input type="file" name="rep_mess_image" id="rep_mess_image">
                                      <i class="fas fa-file-image"></i>
                                  </label>
                                  <button type="submit" class="send-button">
                                  <i class="fas fa-arrow-right"></i>
                                  </button>
                              </div>
                          </form>
                        </div>
                      <!-- ******** -->

                  </div>           
                  {% if comment.repply_commentviews_set.all %}
                      {% for rep_comment in comment.repply_commentviews_set.all %}
                          <div class="comment-cad-repply"> 
                                  <a href=" {% url 'post_profile' rep_comment.user_rep_id %}">@{{ rep_comment.user_rep.username }}</a>
                                  <h5>{{ rep_comment.rep_message }}</h5> 
                                  {% if rep_comment.rep_mess_image %}
                                  <h5>
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                    rddđ
                                  </h5>
                                      <img src="{{ rep_comment.rep_mess_image.url }}" width="100">
                                  {% endif %}                            
                          </div>
                      {% endfor %}
                  {% endif %}  
              </div>
              <br>
          {% endfor %}
      </div>

      <hr>
      
  </div>
  </div>

  <script> function toggleCommentPopupWithDelay() {
    // Delay khoảng 1 giây (1000ms) trước khi hiển thị popup
    setTimeout(function() {
      var popup = document.getElementById("comment-popup");
      popup.style.display = "block";
    }, 300); // Delay 1 giây (1000ms)
  }
  
  function closeCommentPopup() {
    var popup = document.getElementById("comment-popup");
    popup.style.display = "none";
  }
  </script>
</body>
</html>
